# プロジェクト技術概要レポート

## 1. PJ概要

このプロジェクトは、n8n という名称のワークフロー自動化ツールです。`package.json` の記述から、モノリポジトリ（`n8n-monorepo`）として管理されていることがわかります。n8nは、様々なWebサービスやツールを「ノード」として表現し、それらをGUI上で繋ぎ合わせることで、プログラミングの知識が少ないユーザーでも複雑な自動化処理（ワークフロー）を構築できることを目的としています。

ユーザーは、例えば「Gmailで特定のメールを受信したら、その内容をGoogleスプレッドシートに記録し、Slackに通知する」といった一連のタスクを、コーディングすることなく実現できます。

## 2. 技術要素分析

本プロジェクトで採用されている主要な技術要素は以下の通りです。

*   **言語**: TypeScript
    *   プロジェクト全体の主要な開発言語として採用されており、静的型付けによるコードの堅牢性と開発効率の向上を図っています。
*   **パッケージ管理**: pnpm
    *   効率的なディスクスペース利用と高速なインストールを特徴とするパッケージマネージャーです。ルートの`package.json`でバージョンが`10.18.3`に指定されています。
*   **モノリポジトリ管理**: Turbo
    *   モノリポジトリ内の多数のパッケージ（`packages/*`）に対するビルド、テスト、リンティングといったタスクを効率的に実行するためのタスクランナーです。
*   **フレームワーク/ライブラリ**:
    *   フロントエンドは `packages/frontend` にてVue.jsやReactなどのモダンなフレームワークが利用されていると推測されます（※詳細分析は別途）。
    *   バックエンドはNode.js上で動作し、特定のフレームワーク（Expressなど）に大きく依存する構成ではなく、機能ごとに独立したパッケージ群で構成されています。

## 3. 重要なコンポーネント

本プロジェクトのバックエンドは、`packages` ディレクトリ配下にある複数のパッケージで構成されており、特に以下の3つが中核を担っています。

*   **`n8n-core`**:
    *   **役割**: アプリケーションの土台となる機能を提供します。具体的には、外部サービスとの通信を行うためのHTTPクライアント、認証（OAuth2など）、ロギング、ファイルシステム操作といった、他のパッケージから共通して利用される低レベルなAPI群を実装しています。
*   **`n8n-workflow`**:
    *   **役割**: ワークフローの定義、実行、状態管理といった、n8nの心臓部とも言えるロジックを担当します。ワークフローがどのようなノードで構成され、どのようにデータが受け渡されるかといったルールは、このパッケージで定義されています。
*   **`n8n-nodes-base`**:
    *   **役割**: ユーザーがGUI上で利用できる具体的な「ノード」の実装を大量に含んでいます。例えば、Airtableへの接続、Google Sheetsの操作、Slackへのメッセージ送信といった、各サービスとの連携ロジックはこのパッケージに集約されています。`package.json`には数百に及ぶサービス連携の定義が記述されており、n8nの機能の豊富さの源泉となっています。

これら3つのパッケージは、`n8n-core` を基盤として `n8n-workflow` がワークフローの骨格を制御し、その上で `n8n-nodes-base` の各ノードが具体的な処理を実行するという、明確な責務分離が行われています。

## 4. 新参入開発者への注意事項

*   **開発環境のセットアップ**: `pnpm` を利用して依存関係をインストールする必要があります (`pnpm install`)。`npm` や `yarn` は想定されていません。
*   **ビルドと実行**: モノリポジトリ全体、あるいは各パッケージのビルドや開発サーバーの起動は `turbo` コマンド (`pnpm dev`, `pnpm build` など) を通じて行います。
*   **コードの探索**: 機能は `packages` ディレクトリ以下にモジュールとして分割されています。新しい機能を追加したり、既存の機能を修正したりする際は、まず関連するパッケージを特定することから始めると効率的です。
*   **ノードの追加**: 新しいサービス連携ノードを追加する場合は、`packages/nodes-base` ディレクトリの構造を参考に、新しいノード定義とクレデンシャル定義を追加する必要があります。

## 5. 今後の開発計画

本レポート作成後、以下のステップで詳細な分析と改善計画の策定を進めます。

1.  **コード構造の分析レポート作成**:
    *   最重要コンポーネントとして `n8n-workflow` を選定し、ソースコードレベルでの詳細な分析を行います。UML図などを用いて、その内部構造と他パッケージとの連携を可視化します。
2.  **改善案及び改善開発計画の作成**:
    *   分析結果に基づき、可読性、保守性、性能、信頼性の観点から課題を抽出し、具体的な改善策とその開発計画を提案します。
